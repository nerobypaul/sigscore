## 10:00 — P16: Team members with RBAC

**Task:** Build team member management with role-based access control
**Changes:**
- backend/src/services/members.ts — Member service: list, invite by email, update role, remove, transfer ownership with atomic transaction
- backend/src/routes/members.ts — Member routes with zod validation, requireOrgRole middleware
- backend/src/middleware/auth.ts — Add requireOrgRole middleware (OWNER > ADMIN > MEMBER > VIEWER hierarchy), set orgRole on req
- backend/src/types/express.d.ts — Add orgRole to Express Request interface
- backend/src/routes/api-keys.ts — Enforce ADMIN role on create/revoke/delete
- backend/src/routes/bulk.ts — Enforce ADMIN role on all bulk operations
- backend/src/routes/slack-settings.ts — Enforce ADMIN role on all Slack settings
- backend/src/routes/webhooks.ts — Enforce ADMIN role on create/delete webhooks
- frontend/src/pages/TeamMembers.tsx — Full team page: member table with avatars, inline role selector, invite modal, remove confirmation, ownership transfer, role permissions legend
- frontend/src/App.tsx — Add /team route
- frontend/src/components/Layout.tsx — Add Team sidebar nav link

**Decisions:**
- RBAC hierarchy: OWNER > ADMIN > MEMBER > VIEWER (not just boolean isAdmin)
- Sensitive routes (API keys, bulk ops, Slack, webhooks) all gated behind ADMIN
- Ownership transfer uses atomic Prisma transaction (demote + promote)
- Cannot self-demote or remove yourself for safety

**Status:** completed

## 10:15 — P17: Audit log — enterprise compliance trail

**Task:** Build audit log for enterprise compliance (who did what, when)
**Changes:**
- backend/prisma/schema.prisma — Add AuditLog model with 4 composite indexes
- backend/prisma/migrations/20260214000000_add_audit_log/migration.sql — CREATE TABLE + indexes
- backend/src/services/audit.ts — logAudit (fire-and-forget), getAuditLogs (cursor pagination, filters), getEntityHistory
- backend/src/routes/audit.ts — GET /audit (ADMIN, filterable), GET /audit/entity/:type/:id
- backend/src/controllers/contacts.ts — Audit calls on create/update/delete
- backend/src/controllers/deals.ts — Audit calls on create/update/delete (tracks stage changes)
- backend/src/controllers/companies.ts — Audit calls on create/update/delete
- backend/src/services/members.ts — Audit calls on invite, role_change, remove, transfer_ownership
- frontend/src/pages/AuditLog.tsx — Filter bar, color-coded action badges, expandable JSON diffs, cursor pagination, entity links
- frontend/src/components/Layout.tsx — Audit Log sidebar nav link

**Decisions:**
- Fire-and-forget pattern for audit logging — never blocks API responses
- Audit log is ADMIN-only for viewing (entity history available to all members)
- Changes stored as `{ field: { from, to } }` JSON for update diffs

**Status:** completed

## 10:20 — P18: Saved views — custom filtered views

**Task:** Let users save and share filtered views of contacts, companies, and deals
**Changes:**
- backend/prisma/schema.prisma — Add SavedView model
- backend/prisma/migrations/20260214010000_add_saved_views/migration.sql — CREATE TABLE + indexes
- backend/src/services/saved-views.ts — CRUD + setDefault (unsets previous default per entity type)
- backend/src/routes/saved-views.ts — 5 endpoints with zod validation
- frontend/src/components/SavedViewSelector.tsx — Horizontal tab bar with context menu
- frontend/src/components/SaveViewModal.tsx — Name input, emoji picker, share toggle
- frontend/src/pages/Contacts.tsx — SavedViewSelector integration with filter sync
- frontend/src/pages/Companies.tsx — SavedViewSelector integration
- frontend/src/pages/Deals.tsx — SavedViewSelector with stage filter support

**Decisions:**
- Views can be personal or shared (isShared toggle)
- One default view per entity type per user
- Owner or ADMIN can modify any view, others can only modify their own
- Context menu on view tabs: rename, set default, share/unshare, delete

**Status:** completed

## 10:45 — P19: Segment inbound connector

**Task:** Build Segment webhook connector so customers can pipe existing analytics data into DevSignal
**Changes:**
- backend/src/services/segment-connector.ts — Handle all 5 Segment call types: identify (contact upsert), track (signal), group (company upsert), page/screen (signal). HMAC-SHA1 signature verification. Batch payload support.
- backend/src/routes/segment-webhook.ts — POST /webhooks/segment/:sourceId (HMAC auth, not JWT)
- backend/src/routes/connectors.ts — ADMIN routes: create source (auto-gen secret), get config, rotate secret, delete
- frontend/src/pages/Settings.tsx — Segment tab: connect flow, copyable webhook URL, show/hide secret, rotate/disconnect, setup instructions

**Decisions:**
- Always return 200 to Segment to avoid retries on app-level errors (log internally)
- Idempotency keys: `seg_${messageId}` prevents duplicate signals
- identify → contact upsert by email or anonymousId
- track → signal creation with workflow trigger fire-and-forget
- group → company upsert by domain, link calling user's contact

**Status:** completed

## 11:00 — P20: Account 360 — AI-powered company intelligence hub

**Task:** Transform CompanyDetail into a 5-tab Account 360 page that surfaces all existing AI endpoints
**Changes:**
- frontend/src/pages/CompanyDetail.tsx — Complete rewrite: Overview (score card, quick stats, recent signals/activities), Timeline (unified feed with type filters), Contacts (grid with AI enrich), Deals (pipeline view), AI Intelligence (brief panel, next-best-actions, scoring factors)
- frontend/src/components/AccountScoreCard.tsx — PQA score display with tier colors, trend arrows, factor bar breakdown
- frontend/src/components/AccountTimeline.tsx — Merged signal+activity+deal timeline with filter pills, load-more
- frontend/src/components/AIBriefPanel.tsx — AI brief with markdown renderer, freshness indicator, generate/regenerate

**Decisions:**
- No backend changes — all AI endpoints already existed (brief, suggest, enrich)
- Built-in markdown renderer (no deps) handles headers, bold, lists, paragraphs
- Score colors: HOT=red, WARM=amber, COLD=blue, INACTIVE=gray
- This is the "demo closer" page — the one that makes a VP of Sales say "I need this"

**Status:** completed

## Competitive Intelligence (researched this cycle)
- PLG CRM graveyard: Calixa ($16.3M) shut down, Koala ($15M) acqui-hired by Cursor, Endgame ($17M) pivoted away
- Survivors (Pocus, Correlated) pivoted to broader AI sales intelligence
- DevSignal's gap: "Reo.Dev + Attio in one box" — native developer signals + CRM, nobody else does this
- Price advantage: 5-12x cheaper than Common Room ($1k/mo), Warmly ($499/mo)
- Key lesson: niche down on devtools, don't try to be "PLG CRM for everyone"

## Next Steps
- ICP/GTM strategy research in progress — may reframe positioning from "Sales" to "Growth Intelligence"
- P21: Slack bot (bi-directional) with interactive alerts + action buttons
- P22: Async workflow execution via BullMQ
- Consider: rename from "headless CRM" to "developer growth platform"?
