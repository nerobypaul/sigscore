## 17:57 — Set up claude-flow multi-agent orchestration

**Task:** Initialize claude-flow for the headless CRM project with full runtime setup
**Changes:**
- .claude-flow/config.yaml — Runtime config: hierarchical-mesh swarm, hybrid memory with HNSW, self-learning enabled. Changed MCP port from 3000 to 3001 to avoid conflict with Express backend.
- .mcp.json — MCP server configuration for claude-flow integration
- .claude/settings.json — Hooks (pre-bash, post-edit, routing, session lifecycle), permissions, agent team config, daemon workers
- .claude/skills/ — 29 pre-built workflow skills
- .claude/commands/ — 10 CLI commands
- .claude/agents/ — 103 specialized agents
- .claude/helpers/ — Hook handlers, statusline, auto-memory sync
- .swarm/memory.db — Initialized memory database with HNSW vector indexing

**Decisions:**
- Changed MCP port from 3000 → 3001 to avoid conflict with Express backend on port 3000
- Used `init --wizard` approach (creates full local config without global install)
- Kept MCP autoStart: false — can be enabled later when needed
- Left daemon workers running (PID: 8308) with 5 active workers: map, audit, optimize, consolidate, testgaps

**Open questions:**
- None

**Status:** completed

---

## 18:15 — DevSignal: Market research, product spec, and Signal Engine implementation

**Task:** Research niche market opportunity, write product specs, and build Phase 1 of AI-first headless CRM for devtool companies
**Changes:**

*Research & Specs:*
- docs/MARKET-RESEARCH.md — Full market analysis: devtool PLG CRM gap, competitor landscape, pricing benchmarks, target persona
- docs/PRODUCT-SPEC.md — Complete product spec: data model, API design, signal engine, PQA scoring, architecture, implementation phases

*Schema:*
- backend/prisma/schema.prisma — Added 7 new models: Signal, SignalSource, AccountScore, ContactIdentity, CustomObjectSchema, CustomObjectRecord, WebhookEndpoint, WebhookDelivery. Updated DealStage to PLG-native pipeline (ANONYMOUS_USAGE → IDENTIFIED → ACTIVATED → TEAM_ADOPTION → EXPANSION_SIGNAL → SALES_QUALIFIED → NEGOTIATION → CLOSED_WON/CLOSED_LOST). Added github field to Contact, githubOrg to Company.

*Signal Engine (new):*
- backend/src/services/signals.ts — Signal ingest with identity resolution (email domain → account matching), batch ingest, account timeline (signals + activities merged)
- backend/src/controllers/signals.ts — Signal API handlers with async webhook dispatch and score recomputation on ingest
- backend/src/routes/signals.ts — POST /signals, POST /signals/batch, GET /signals, GET /accounts/:id/signals, GET /accounts/:id/timeline, GET/POST /accounts/:id/score, GET /accounts/top

*PQA Scoring Engine (new):*
- backend/src/services/account-scores.ts — 6-factor scoring model: user count, usage velocity, feature breadth, engagement recency, seniority signals, firmographic fit. Scores 0-100 with HOT/WARM/COLD/INACTIVE tiers and RISING/STABLE/FALLING trends.

*Signal Sources (new):*
- backend/src/services/signal-sources.ts — CRUD for configuring signal integrations (GitHub, npm, website, docs, product API, Segment, custom webhook)
- backend/src/controllers/signal-sources.ts — Signal source API handlers
- backend/src/routes/signal-sources.ts — Full CRUD + test endpoint

*Webhooks (new):*
- backend/src/services/webhooks.ts — Webhook registration, HMAC-SHA256 signed delivery, delivery logging
- backend/src/controllers/webhooks.ts — Webhook API handlers
- backend/src/routes/webhooks.ts — GET/POST/DELETE webhooks

*Fixes:*
- backend/src/index.ts — Wired up 3 new route groups, added signal-specific rate limiter (500/min), increased body size to 5mb, branded health check
- backend/src/middleware/validate.ts — Fixed Zod validation to return structured error responses and write parsed body back to req.body
- backend/src/routes/contacts.ts — Fixed nested Zod schema (body wrapper removed), added github field
- backend/src/routes/companies.ts — Fixed nested Zod schema, added githubOrg field
- backend/src/routes/deals.ts — Fixed nested Zod schema, updated stages to PLG-native enum
- backend/src/routes/activities.ts — Fixed nested Zod schema
- backend/src/config/index.ts — Added missing corsOrigin and nodeEnv properties
- backend/tsconfig.json — Added DOM lib for fetch/AbortSignal types

**Decisions:**
- Chose devtool companies (PLG + bottom-up enterprise) as the niche — $6.4B market, clear gap between signal tools (Reo.dev, Koala) and CRMs (Attio, HubSpot)
- Named the product "DevSignal" — signals are the core differentiator
- Account-based pricing (not per-seat) — aligns with how devtool teams work
- PLG-native pipeline stages replace traditional LEAD/QUALIFIED/PROPOSAL
- Rule-based PQA scoring first (6 weighted factors), ML model planned for later
- Monolith-first architecture — one deployable, PostgreSQL for everything
- Signal processing is synchronous for now, BullMQ async processing planned for Phase 2
- Webhook delivery is fire-and-forget with logging — retry logic planned for Phase 2

**Open questions:**
- Should we add GitHub App OAuth flow for signal source setup?
- Should AI brief generation use Claude API or support multiple providers?

**Status:** completed
