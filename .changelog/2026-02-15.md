## 14:00 -- Twitter/X mention tracking connector

**Task:** Build a Twitter/X connector for DevSignal that monitors tweets mentioning a customer's product with sentiment analysis

**Changes:**
- backend/prisma/schema.prisma -- Added TWITTER to SignalSourceType enum
- backend/src/services/twitter-connector.ts -- Core connector service: configureTwitter, getTwitterConfig, disconnectTwitter, syncTwitterMentions, getTwitterConnectedOrganizations, identity resolution, sentiment classification (positive/negative/neutral), tweet type classification (mention/question/complaint/praise), rate limit handling (429 + x-rate-limit-reset)
- backend/src/routes/twitter-connector.ts -- REST API routes: POST /connect, GET /status, POST /sync, DELETE /disconnect (all ADMIN-only with authenticate + requireOrganization)
- backend/src/jobs/queue.ts -- Added TWITTER_SYNC queue name, TwitterSyncJobData interface, twitterSyncQueue instance
- backend/src/jobs/producers.ts -- Added enqueueTwitterSync with per-org deduplication
- backend/src/jobs/workers.ts -- Added Twitter sync worker with scheduler sentinel handling
- backend/src/jobs/scheduler.ts -- Added 30-minute cron for Twitter sync, enqueueTwitterSyncForAllConnected helper
- backend/src/app.ts -- Mounted twitter connector routes at /api/v1/connectors/twitter
- frontend/src/pages/Settings.tsx -- Added Twitter/X tab with: bearer token input, keywords input (comma-separated), connected status with sentiment breakdown (color-coded bar + badges), sync now / disconnect buttons, setup instructions

**Decisions:**
- Used 30-minute sync interval (same as Discord) since mentions are time-sensitive
- Keyword-based sentiment classification (positive/negative/neutral) using curated word lists rather than ML model, keeping it zero-dependency
- Bearer token auth (Twitter API v2 Basic tier) rather than OAuth user tokens since we only need read access to public tweets
- Store signals with types: twitter_mention (default), twitter_question (?), twitter_complaint (negative), twitter_praise (positive)
- Identity resolution: match by existing Twitter ContactIdentity, then by name matching, then by domain extraction from bio
- Rate limit handling: respect 429 + Retry-After/x-rate-limit-reset headers, cap wait at 5 minutes

**Open questions:**
- Twitter API v2 Basic tier costs $100/mo per app -- should we document this cost for customers?
- Should we add a "recent mentions preview" widget showing last 5 tweets directly in Settings?

**Status:** completed

## 16:30 -- Clearbit company & contact enrichment service

**Task:** Build a Clearbit enrichment service that automatically enriches company records with firmographic data and contact records with professional data

**Changes:**
- backend/src/services/clearbit-enrichment.ts -- Core enrichment service: configureClearbit, getClearbitConfig, disconnectClearbit, enrichCompany (16 field mappings including tech stack), enrichContact (10 field mappings), bulkEnrichCompanies, bulkEnrichContacts, getEnrichmentStats, getConnectedOrganizations. Redis caching (24h), rate limiting (600ms delay + 429 backoff), batch processing (10 per batch, 1s delay)
- backend/src/routes/enrichment.ts -- REST API routes: POST /connect (ADMIN), GET /status (ADMIN), POST /companies/:id (MEMBER), POST /contacts/:id (MEMBER), POST /bulk/companies (ADMIN), POST /bulk/contacts (ADMIN), DELETE /disconnect (ADMIN)
- backend/src/jobs/queue.ts -- Added ENRICHMENT_BULK queue name, BulkEnrichmentJobData interface, bulkEnrichmentQueue instance
- backend/src/jobs/producers.ts -- Added enqueueBulkEnrichment with per-org+type deduplication
- backend/src/jobs/workers.ts -- Added bulk enrichment worker with scheduler sentinel handling, concurrency 1 to respect rate limits
- backend/src/jobs/scheduler.ts -- Added daily 3 AM cron for auto-enrichment of new companies, enqueueClearbitEnrichmentForAllConnected helper
- backend/src/app.ts -- Mounted enrichment routes at /api/v1/enrichment
- frontend/src/pages/Settings.tsx -- Added Clearbit tab with: API key input (with link to clearbit.com dashboard), connected status with enrichment timestamps, company/contact coverage stats with progress bars (percentage + counts), bulk enrichment buttons for both companies and contacts, info card explaining what fields get enriched, disconnect button

**Decisions:**
- Stored Clearbit API key in organization.settings JSON (same pattern as HubSpot/Discord/etc.)
- Only overwrite core fields (name, description) if currently empty to avoid clobbering user edits; always update industry/size/website and customFields since enrichment data is authoritative
- Tech stack stored in customFields.techStack as an array -- extremely valuable for devtool companies to see what potential customers are already using
- Enrichment results cached in Redis for 24h (clearbit:company:{domain}, clearbit:person:{email}) to minimize API calls
- Bulk enrichment concurrency set to 1 worker to stay within Clearbit rate limits
- Daily scheduler at 3 AM auto-enriches only companies (not contacts) since companies are the higher-value entity for pipeline signal

**Open questions:**
- Should we trigger automatic enrichment when a new company is created via identity resolution (inline vs queued)?
- CompanyDetail.tsx would benefit from an "Enrich with Clearbit" button in the quick actions bar (line ~239, alongside AI Brief and View Deals buttons)

**Status:** completed
