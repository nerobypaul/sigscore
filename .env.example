# =============================================================================
# Sigscore — Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
# Variables marked [REQUIRED] must be set. Others have sensible defaults.
# In production, all variables handled by requireEnv() MUST be set explicitly;
# the server will refuse to start with placeholder secrets.
# =============================================================================

# -----------------------------------------------------------------------------
# Core
# -----------------------------------------------------------------------------
NODE_ENV=development                         # development | production | test
PORT=3000                                    # Backend server port
API_URL=http://localhost:3000                # Public URL of the backend API
CORS_ORIGIN=http://localhost:5173            # Allowed CORS origin (frontend URL)
FRONTEND_URL=http://localhost:5173           # Frontend base URL (used in emails, redirects)
APP_URL=https://app.sigscore.dev             # [Optional] Public app URL used for webhook URLs (PostHog, etc.)

# -----------------------------------------------------------------------------
# Database  [REQUIRED]
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://user:password@localhost:5432/sigscore   # PostgreSQL connection string

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_HOST=localhost                          # Redis hostname (default: localhost)
REDIS_PORT=6379                              # Redis port (default: 6379)
REDIS_PASSWORD=                              # [Optional] Redis password (omit for no auth)

# -----------------------------------------------------------------------------
# Workers (BullMQ)
# -----------------------------------------------------------------------------
ENABLE_WORKERS=false                         # Set to "true" to start BullMQ workers alongside the API server

# -----------------------------------------------------------------------------
# Authentication — JWT  [REQUIRED in production]
# -----------------------------------------------------------------------------
JWT_SECRET=                                  # [REQUIRED] Secret for signing access tokens
JWT_REFRESH_SECRET=                          # [REQUIRED] Secret for signing refresh tokens
JWT_EXPIRES_IN=15m                           # Access token TTL (default: 15m)
JWT_REFRESH_EXPIRES_IN=7d                    # Refresh token TTL (default: 7d)

# -----------------------------------------------------------------------------
# OAuth — GitHub
# -----------------------------------------------------------------------------
OAUTH_GITHUB_CLIENT_ID=                      # [Optional] GitHub OAuth App — Client ID
OAUTH_GITHUB_CLIENT_SECRET=                  # [Optional] GitHub OAuth App — Client Secret
OAUTH_GITHUB_CALLBACK_URL=                   # [Optional] e.g. http://localhost:3000/api/v1/oauth/github/callback

# -----------------------------------------------------------------------------
# OAuth — Google
# -----------------------------------------------------------------------------
OAUTH_GOOGLE_CLIENT_ID=                      # [Optional] Google OAuth — Client ID
OAUTH_GOOGLE_CLIENT_SECRET=                  # [Optional] Google OAuth — Client Secret
OAUTH_GOOGLE_CALLBACK_URL=                   # [Optional] e.g. http://localhost:3000/api/v1/oauth/google/callback

# -----------------------------------------------------------------------------
# Stripe  [REQUIRED in production]
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_placeholder        # [REQUIRED] Stripe secret key (sk_test_... or sk_live_...)
STRIPE_WEBHOOK_SECRET=whsec_test_placeholder # [REQUIRED] Stripe webhook signing secret
STRIPE_PRICE_PRO=price_pro_placeholder       # Stripe Price ID for Pro plan ($79/mo)
STRIPE_PRICE_SCALE=price_scale_placeholder   # Stripe Price ID for Scale plan ($299/mo)
STRIPE_PRICE_GROWTH=price_growth_placeholder  # Stripe Price ID for Growth plan ($199/mo)
# -----------------------------------------------------------------------------
# Email — Resend
# -----------------------------------------------------------------------------
RESEND_API_KEY=                              # [Optional] Resend API key for transactional email
EMAIL_FROM=Sigscore <notifications@sigscore.dev>  # Sender address for outbound email

# -----------------------------------------------------------------------------
# AI — Anthropic
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=                           # [Optional] Anthropic API key for AI features (briefs, enrichment)
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929   # Claude model to use (default: claude-sonnet-4-5-20250929)

# -----------------------------------------------------------------------------
# Integrations — HubSpot
# -----------------------------------------------------------------------------
HUBSPOT_CLIENT_ID=                           # [Optional] HubSpot OAuth App — Client ID
HUBSPOT_CLIENT_SECRET=                       # [Optional] HubSpot OAuth App — Client Secret

# -----------------------------------------------------------------------------
# Integrations — Salesforce
# -----------------------------------------------------------------------------
SALESFORCE_CLIENT_ID=                        # [Optional] Salesforce Connected App — Consumer Key
SALESFORCE_CLIENT_SECRET=                    # [Optional] Salesforce Connected App — Consumer Secret

# -----------------------------------------------------------------------------
# Integrations — Slack
# -----------------------------------------------------------------------------
SLACK_SIGNING_SECRET=                        # [Optional] Slack app signing secret for verifying interaction payloads

# -----------------------------------------------------------------------------
# Monitoring — Sentry
# -----------------------------------------------------------------------------
SENTRY_DSN=                                  # [Optional] Sentry DSN for backend error tracking
SIGSCORE_VERSION=                           # [Optional] Release version reported to Sentry (auto-detected from package.json if omitted)

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000                  # Rate limit window in ms (default: 900000 = 15 min)
RATE_LIMIT_MAX_REQUESTS=100                  # Max requests per window per IP (default: 100)

# =============================================================================
# Frontend (Vite — prefix with VITE_ to expose to client code)
# =============================================================================
VITE_API_URL=http://localhost:3000           # Backend API URL used by the frontend
VITE_APP_VERSION=1.0.0                       # App version shown in UI and reported to Sentry
VITE_SENTRY_DSN=                             # [Optional] Sentry DSN for frontend error tracking
VITE_STRIPE_PRICE_PRO=price_pro_placeholder  # Stripe Price ID (mirrored for client-side checkout)
VITE_STRIPE_PRICE_SCALE=price_scale_placeholder  # Stripe Price ID (mirrored for client-side checkout)
VITE_STRIPE_PRICE_GROWTH=price_growth_placeholder  # Stripe Price ID (mirrored for client-side checkout)