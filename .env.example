# ============================================================
# DevSignal CRM — Environment Variables
# ============================================================
# Copy this file to .env and fill in real values:
#   cp .env.example .env
# ============================================================

# ---- General ----
# Application environment: development | production | test
NODE_ENV=development

# Port the Express server listens on
PORT=3000

# Public URL of the API (used for OAuth callbacks, links, etc.)
API_URL=http://localhost:3000

# Allowed CORS origin (your frontend URL)
CORS_ORIGIN=http://localhost:5173

# Frontend URL (used for redirects after OAuth, email links, etc.)
FRONTEND_URL=http://localhost:5173

# ---- PostgreSQL (used by Docker Compose for the DB container) ----
POSTGRES_USER=devsignal
POSTGRES_PASSWORD=CHANGE_ME_strong_password_here
POSTGRES_DB=devsignal
POSTGRES_PORT=5432

# ---- Database (Prisma connection string) ----
# Adjust user/password/host/port/db to match your setup.
# In Docker Compose the host is the service name (e.g. "db").
DATABASE_URL=postgresql://devsignal:CHANGE_ME_strong_password_here@localhost:5432/devsignal

# ---- Redis ----
REDIS_HOST=localhost
REDIS_PORT=6379
# Leave empty if Redis does not require a password
REDIS_PASSWORD=

# ---- JWT (generate strong random strings for production!) ----
# CRITICAL: These MUST be changed in production. The app will refuse
# to start with fallback secrets when NODE_ENV=production.
JWT_SECRET=CHANGE_ME_generate_with_openssl_rand_base64_64
JWT_REFRESH_SECRET=CHANGE_ME_generate_with_openssl_rand_base64_64
# Access token lifetime (e.g. 15m, 1h)
JWT_EXPIRES_IN=15m
# Refresh token lifetime (e.g. 7d, 30d)
JWT_REFRESH_EXPIRES_IN=7d

# ---- OAuth — Google (optional, leave empty to disable) ----
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_GOOGLE_CALLBACK_URL=http://localhost:3000/api/v1/auth/oauth/google/callback

# ---- OAuth — GitHub (optional, leave empty to disable) ----
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=
OAUTH_GITHUB_CALLBACK_URL=http://localhost:3000/api/v1/auth/oauth/github/callback

# ---- Anthropic AI (for account briefs / AI engine) ----
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# ---- Rate Limiting ----
# Global rate-limit window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Max requests per window per IP (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Sentry error monitoring
SENTRY_DSN=
